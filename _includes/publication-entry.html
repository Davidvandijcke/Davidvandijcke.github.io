{% comment %}
  Custom "publication-entry.html" to show minimal info in main block, and everything else in a collapsible
{% endcomment %}
{% include base_path %}

{% assign title       = post.title %}
{% assign date_string = post.date | default: "1900-01-01" | date: "%Y" %}

<div class="pub-entry">
  <!-- Main Block -->
  <h3 class="pub-title">{{ title }}</h3>

  {% if post.venue %}
    <p><strong>Venue:</strong> <em>{{ post.venue }}</em> ({{ date_string }})</p>
  {% endif %}

  {% if post.coauthors %}
    <p><strong>Coauthors:</strong> {{ post.coauthors }}</p>
  {% endif %}

  {% if post.media %}
    <!-- strip_newlines ensures any multiline markdown is forced inline -->
    <p>
      <strong>Media coverage:</strong>
      {{ post.media | markdownify | strip_newlines }}
    </p>
  {% endif %}

  <!-- Collapsible Section -->
  <details class="pub-details">
    <summary>Show details</summary>

    {% if post.paperurl %}
      <p>
        <strong>Paper Download Link:</strong>
        <a href="{{ post.paperurl }}" target="_blank">View/Download</a>
      </p>
    {% endif %}

    {% if post.excerpt %}
      <p>
        <strong>Abstract:</strong>
        {{ post.excerpt | markdownify }}
      </p>
    {% endif %}

    {% if post.replication %}
      <p>
        <strong>Replication Materials:</strong>
        {{ post.replication | markdownify | strip_newlines }}
      </p>
    {% endif %}

    {% if post.workingpaper %}
      <p>
        <strong>WP Version:</strong>
        {{ post.workingpaper | markdownify | strip_newlines }}
      </p>
    {% endif %}
  </details>
</div>
